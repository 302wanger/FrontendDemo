<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>深复制</title>
</head>
<body>
<script>
  /** 浅复制 **/
  /*    let person1 = {
          'name': 'Jack',
          'age': 29
      };
      let person2 = person1;
      person2.name = "Kai";

      console.log(person1.name);
      console.log(person2.name);*/


  let person1 = {
    'name': 'Jack',
    'age': 29,
    arr: [1, 2, 3],
    'fn': function () {
      console.log('fn')
    },
    'reg': new RegExp('e')
  };
  /** 1.JSON.parse JSON.stringify深复制 **/
  // let person2 = JSON.parse(JSON.stringify(person1));

  /** 2. 遍历递归实现深复制 **/
  function deepClone (obj, clone) {
    let newObj = clone || {};
    for (let i in obj) {
      if (typeof obj[i] == 'Object') {
        clone = Array.isArray(obj[i]) ? [] : {}
        deepClone(obj[i], clone);
      } else {
        newObj[i] = obj[i];
      }
    }
    return newObj;
  }

  let person2 = deepClone(person1);

  person2.name = "Kai";
  person1.arr = [4,5,6];

  console.log(person1.name);
  console.log(person2.name);
  console.log(person2.arr);
  console.log(person2.fn);
  console.log(person2.reg);

</script>
</body>
</html>